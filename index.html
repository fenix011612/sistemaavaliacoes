<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teste Firebase Oficial</title>
</head>
<body>

<h2>Teste Sistema Avalia√ß√µes</h2>

<input type="text" id="nome" placeholder="Nome do paciente">
<select id="tipo">
  <option value="fisio">Fisio</option>
  <option value="pilates">Pilates</option>
  <option value="pelvica">P√©lvica</option>
  <option value="recovery">Recovery</option>
</select>

<button onclick="salvar()">Salvar</button>

<hr>

<button onclick="listar()">Listar Avalia√ß√µes</button>

<div id="lista"></div>

<script type="module">

// üî• IMPORTS CORRETOS VIA CDN
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
  getDatabase, 
  ref, 
  push, 
  set, 
  get 
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";


// üîê SUA CONFIGURA√á√ÉO
const firebaseConfig = {
  apiKey: "AIzaSyAFNuEzaEvvpBKBGNG7NUf3zt74Q3r1fdo",
  authDomain: "sistemaavaliacoes-26513.firebaseapp.com",
  databaseURL: "https://sistemaavaliacoes-26513-default-rtdb.firebaseio.com",
  projectId: "sistemaavaliacoes-26513",
  storageBucket: "sistemaavaliacoes-26513.firebasestorage.app",
  messagingSenderId: "451297691104",
  appId: "1:451297691104:web:1f886ad169a54c4f8fd785"
};

// üöÄ INICIALIZA√á√ÉO
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);


// üíæ SALVAR
window.salvar = async function(){

  const nome = document.getElementById("nome").value;
  const tipo = document.getElementById("tipo").value;

  if(!nome){
    alert("Digite o nome!");
    return;
  }

  const novaRef = push(ref(db,"avaliacoes"));

  await set(novaRef,{
    nome,
    tipo,
    criadoEm: new Date().toLocaleString()
  });

  alert("Salvo com sucesso üíú");
  document.getElementById("nome").value="";
}


// üìÑ LISTAR
window.listar = async function(){

  const lista = document.getElementById("lista");
  lista.innerHTML = "Carregando...";

  const snapshot = await get(ref(db,"avaliacoes"));

  if(!snapshot.exists()){
    lista.innerHTML = "Nenhuma avalia√ß√£o encontrada.";
    return;
  }

  lista.innerHTML = "";

  snapshot.forEach(child=>{
    const dados = child.val();

    lista.innerHTML += `
      <p>
        <strong>${dados.nome}</strong> - 
        ${dados.tipo} - 
        ${dados.criadoEm}
      </p>
    `;
  });

}

</script>

</body>
</html>








