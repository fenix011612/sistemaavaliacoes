<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema de Avalia√ß√µes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --lilas:#7b6cf6;
  --ciano:#00cfe8;
  --fundo:#f4f6fb;
}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--fundo);
}
header{
  background:linear-gradient(90deg,var(--lilas),var(--ciano));
  color:white;
  padding:20px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
}
.container{
  padding:20px;
  max-width:900px;
  margin:auto;
}
.card{
  background:white;
  padding:20px;
  border-radius:15px;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
  margin-bottom:20px;
}
input, select, textarea{
  width:100%;
  padding:10px;
  margin-top:8px;
  margin-bottom:15px;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  background:var(--lilas);
  color:white;
  border:none;
  padding:10px 15px;
  border-radius:8px;
  cursor:pointer;
}
button:hover{ opacity:0.9; }
.hidden{ display:none; }
.lista-item{
  padding:12px;
  border-bottom:1px solid #eee;
  cursor:pointer;
}
.lista-item:hover{ background:#f0f0ff; }
  .lista-item:hover{ background:#f0f0ff; }

/* --- Estilo para alinhar checkboxes e inputs --- */
.inline-group {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 15px;
}

.card label {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 5px;
}

.inline-group input[type="text"],
.inline-group input[type="number"],
.inline-group input[type="date"] {
  flex: 1;
  min-width: 120px;
}
</style>
</head>
<body>

<header>Sistema de Avalia√ß√µes</header>

<div class="container">

<!-- TELA INICIAL -->
<div id="telaInicial">

<div class="card">
<h3>Nova Avalia√ß√£o</h3>

<input type="text" id="nome" placeholder="Nome do paciente">

<select id="tipo">
<option value="">Selecione o tipo</option>
<option value="Fisioterapia">Fisioterapia</option>
<option value="Pilates">Pilates</option>
<option value="P√©lvica">P√©lvica</option>
<option value="Recovery">Recovery</option>
</select>

<input type="date" id="data">

<button onclick="abrirTelaPorTipo()">Continuar</button>
</div>

<div class="card">
<h3>Avalia√ß√µes Salvas</h3>

<select id="filtroTipo" onchange="carregarAvaliacoes()">
  <option value="">Todas</option>
  <option value="Fisioterapia">Fisioterapia</option>
  <option value="Pilates">Pilates</option>
  <option value="P√©lvica">P√©lvica</option>
  <option value="Recovery">Recovery</option>
</select>

<div id="listaAvaliacoes">Carregando...</div>
</div>

</div>

<!-- TELA FISIOTERAPIA -->
<div id="telaFisioterapia" class="hidden">
  <div class="card">
    <button onclick="voltar()">‚¨Ö Voltar</button>
    <h3>FICHA DE ANAMNESE E (RE)AVALIA√á√ÉO ‚Äì FISIOTERAPIA</h3>

    <!-- TIPO DE ATENDIMENTO -->
    <h4>Tipo de Atendimento</h4>
    <div class="inline-group">
      <label><input type="checkbox" id="fisio_sessao"> Sess√£o</label>
      <label><input type="checkbox" id="fisio_pacote"> Pacote</label>
      <input type="text" id="fisio_qtdSessoes" placeholder="Quantidade de sess√µes">
    </div>

    <!-- FORMA DE PAGAMENTO -->
    <h4>Forma de Pagamento</h4>
    <div class="inline-group">
      <label><input type="checkbox" id="fisio_pix"> Pix</label>
      <label><input type="checkbox" id="fisio_parcelado"> Parcelado</label>
      <input type="text" id="fisio_parcelas" placeholder="Parcelado em quantas vezes">
    </div>

    <label>Parceria? Se sim qual?</label>
    <input type="text" id="fisio_parceria">

    <!-- IDENTIFICA√á√ÉO -->
    <h4>üìå IDENTIFICA√á√ÉO</h4>
    <input type="text" id="fisio_nomeCompleto" placeholder="Nome completo">
    <input type="date" id="fisio_dataNascimento" placeholder="Data de nascimento">
    <input type="text" id="fisio_cpf" placeholder="CPF">

    <div class="inline-group">
      <label><input type="checkbox" id="fisio_masculino"> Masculino</label>
      <label><input type="checkbox" id="fisio_feminino"> Feminino</label>
    </div>

    <input type="text" id="fisio_responsavel" placeholder="Respons√°vel (se menor)">
    <input type="text" id="fisio_parentesco" placeholder="Grau de parentesco">
    <input type="text" id="fisio_cpfResponsavel" placeholder="CPF Respons√°vel">
    <input type="text" id="fisio_profissao" placeholder="Profiss√£o/Ocupa√ß√£o">
    <input type="text" id="fisio_endereco" placeholder="Endere√ßo Residencial">
    <input type="text" id="fisio_telefone" placeholder="Telefone">
    <input type="email" id="fisio_email" placeholder="E-mail">
    <input type="date" id="fisio_dataAvaliacao" placeholder="Data da Avalia√ß√£o">

    <label>Diagn√≥stico Cl√≠nico:</label>
    <textarea id="fisio_diagClinico"></textarea>

    <label>Diagn√≥stico Fisioterap√™utico:</label>
    <textarea id="fisio_diagFisio"></textarea>

    <input type="text" id="fisio_cbdf" placeholder="CBDF">

    <!-- HIST√ìRIA CL√çNICA -->
 <h4>‚öïÔ∏è HIST√ìRIA CL√çNICA</h4>

<label>Queixa Principal:</label>
<textarea id="fisio_queixaPrincipal"></textarea>

<label>HDA:</label>
<textarea id="fisio_hpp"></textarea>

<label>HPP:</label>
<textarea id="fisio_antecedentesPessoais"></textarea>

<label>Antecedentes Familiares:</label>
<textarea id="fisio_antecedentesFamiliares"></textarea>

<label>Tratamentos Realizados:</label>
<textarea id="fisio_tratamentos"></textarea>

<label>H√°bitos de vida:</label>
<textarea id="fisio_habitos"></textarea>

<div class="inline-group">
  <label><input type="checkbox" id="fisio_acompanhamentoSim"> Sim</label>
  <label><input type="checkbox" id="fisio_acompanhamentoNao"> N√£o</label>
  <input type="text" id="fisio_especialidade" placeholder="Qual especialidade?">
</div>

<h4>‚öïÔ∏è EXAMES COMPLEMENTARES</h4>
<div class="inline-group">
  <label><input type="checkbox" id="fisio_examesSim"> Sim</label>
  <label><input type="checkbox" id="fisio_examesNao"> N√£o</label>
</div>

<textarea id="fisio_examesQuais" placeholder="Se sim, quais?"></textarea>

<h4>‚öïÔ∏è USA MEDICAMENTOS</h4>
<div class="inline-group">
  <label><input type="checkbox" id="fisio_medicamentoSim"> Sim</label>
  <label><input type="checkbox" id="fisio_medicamentoNao"> N√£o</label>
</div>

<textarea id="fisio_medicamentosQuais" placeholder="Se sim, quais?"></textarea>

    <!-- APRESENTA√á√ÉO DO PACIENTE -->
    <h4>‚öïÔ∏è APRESENTA√á√ÉO DO PACIENTE</h4>
    <div class="inline-group">
      <label><input type="checkbox" id="fisio_orientado"> Deambulando e orientado</label>
      <label><input type="checkbox" id="fisio_apoio"> Deambulando com apoio</label>
      <label><input type="checkbox" id="fisio_confuso"> Confuso</label>
      <label><input type="checkbox" id="fisio_desorientado"> Desorientado</label>
    </div>

    <!-- EXAMES COMPLEMENTARES -->
    <h4>‚öïÔ∏è EXAMES COMPLEMENTARES</h4>
    <div class="inline-group">
      <label><input type="checkbox" id="fisio_examesSim"> Sim</label>
      <label><input type="checkbox" id="fisio_examesNao"> N√£o</label>
    </div>

    <!-- MEDICAMENTOS -->
    <h4>‚öïÔ∏è USA MEDICAMENTOS</h4>
    <div class="inline-group">
      <label><input type="checkbox" id="fisio_medicamentoSim"> Sim</label>
      <label><input type="checkbox" id="fisio_medicamentoNao"> N√£o</label>
    </div>

    <!-- CIRURGIA -->
    <h4>‚öïÔ∏è REALIZOU CIRURGIA</h4>
    <div class="inline-group">
      <label><input type="checkbox" id="fisio_cirurgiaSim"> Sim</label>
      <label><input type="checkbox" id="fisio_cirurgiaNao"> N√£o</label>
    </div>
    <textarea id="fisio_cirurgias" placeholder="Se sim, quais"></textarea>

    <!-- INSPE√á√ÉO/PALPA√á√ÉO -->
    <h4>‚öïÔ∏è INSPE√á√ÉO/PALPA√á√ÉO</h4>
    <div class="inline-group">
      <label><input type="checkbox" id="fisio_normal"> Normal</label>
      <label><input type="checkbox" id="fisio_edema"> Edema</label>
      <label><input type="checkbox" id="fisio_cicatriz"> Cicatriza√ß√£o incompleta</label>
      <label><input type="checkbox" id="fisio_eritema"> Eritemas</label>
      <label><input type="checkbox" id="fisio_outros"> Outros</label>
    </div>

    <!-- AVALIA√á√ÉO F√çSICA -->
    <h4>‚öïÔ∏è AVALIA√á√ÉO F√çSICA</h4>
    <div class="inline-group">
      <input type="number" id="fisio_peso" placeholder="Peso">
      <input type="number" id="fisio_altura" placeholder="Altura">
    </div>

    <!-- TESTES FISIOTERAP√äUTICOS -->
    <h4>üìå TESTES FISIOTERAP√äUTICOS</h4>
    <div class="inline-group">
      <label>Y Balance:</label>
      <label><input type="checkbox" id="fisio_y_risco"> Sim com risco</label>
      <label><input type="checkbox" id="fisio_y_nao"> N√£o</label>
    </div>

    <div class="inline-group">
      <label>Romberg:</label>
      <label><input type="checkbox" id="fisio_romberg_pos"> Positivo</label>
      <label><input type="checkbox" id="fisio_romberg_neg"> Negativo</label>
    </div>

    <div class="inline-group">
      <label>TUG:</label>
      <label><input type="checkbox" id="fisio_tug_normal"> Normal</label>
      <label><input type="checkbox" id="fisio_tug_baixo"> Baixo risco</label>
      <label><input type="checkbox" id="fisio_tug_medio"> M√©dio risco</label>
      <label><input type="checkbox" id="fisio_tug_alto"> Alto risco</label>
    </div>

    <div class="inline-group">
      <label>Lasegue:</label>
      <label><input type="checkbox" id="fisio_lasegue_pos"> Positivo</label>
      <label><input type="checkbox" id="fisio_lasegue_neg"> Negativo</label>
    </div>

    <!-- ESCALA DE FOR√áA MUSCULAR -->
    <h4>‚öïÔ∏è ESCALA DE FOR√áA MUSCULAR</h4>
    <div class="inline-group">
      <label><input type="checkbox" id="fisio_g0"> Grau 0</label>
      <label><input type="checkbox" id="fisio_g1"> Grau 1</label>
      <label><input type="checkbox" id="fisio_g2"> Grau 2</label>
      <label><input type="checkbox" id="fisio_g3"> Grau 3</label>
      <label><input type="checkbox" id="fisio_g4"> Grau 4</label>
      <label><input type="checkbox" id="fisio_g5"> Grau 5</label>
    </div>

    <!-- PLANO TERAP√äUTICO -->
    <h4>üìå PLANO TERAP√äUTICO</h4>
    <textarea id="fisio_objetivos" placeholder="Objetivos do Tratamento"></textarea>
    <textarea id="fisio_recursos" placeholder="Recursos Terap√™uticos"></textarea>
    <textarea id="fisio_planoTratamento" placeholder="Plano do Tratamento"></textarea>
    <input type="text" id="fisio_profissional" placeholder="Profissional / Registro Conselho">

    <button onclick="salvarFisioterapia()">Salvar Avalia√ß√£o</button>
  </div>
</div>
<!-- TELA PILATES -->
<div class="card">

<h3>Avalia√ß√£o Pilates</h3>

<!-- ================= IDENTIFICA√á√ÉO ================= -->

<h4>üìå IDENTIFICA√á√ÉO</h4>

<div class="opcoes-grid">
<label><input type="checkbox" id="pilates_totalpass"> Totalpass</label>
<label><input type="checkbox" id="pilates_gympass"> Gympass</label>
<label><input type="checkbox" id="pilates_gurupass"> Gurupass</label>
<label><input type="checkbox" id="pilates_mensalidade"> Mensalidade</label>
</div>

<label>Parceria? Se sim qual?</label>
<input type="text" id="pilates_parceria">

<label>Nome completo:</label>
<input type="text" id="pilates_nomeCompleto">

<div class="grid-2">
<div>
<label>Data de nascimento:</label>
<input type="date" id="pilates_dataNascimento">
</div>
<div>
<label>CPF:</label>
<input type="text" id="pilates_cpf">
</div>
</div>

<div class="opcoes">
<label><input type="radio" name="pilates_sexo" id="pilates_masculino"> Masculino</label>
<label><input type="radio" name="pilates_sexo" id="pilates_feminino"> Feminino</label>
</div>

<label>Respons√°vel (se menor):</label>
<input type="text" id="pilates_responsavel">

<div class="grid-2">
<div>
<label>Grau de parentesco:</label>
<input type="text" id="pilates_parentesco">
</div>
<div>
<label>CPF:</label>
<input type="text" id="pilates_cpfResponsavel">
</div>
</div>

<label>Profiss√£o/Ocupa√ß√£o:</label>
<input type="text" id="pilates_profissao">

<label>Endere√ßo Residencial:</label>
<input type="text" id="pilates_endereco">

<div class="grid-2">
<div>
<label>Telefone:</label>
<input type="text" id="pilates_telefone">
</div>
<div>
<label>E-mail:</label>
<input type="email" id="pilates_email">
</div>
</div>

<label>Data da Avalia√ß√£o:</label>
<input type="date" id="pilates_dataAvaliacao">

<label>Diagn√≥stico Cl√≠nico:</label>
<textarea id="pilates_diagClinico"></textarea>

<label>Diagn√≥stico Fisioterap√™utico:</label>
<textarea id="pilates_diagFisio"></textarea>

<label>CBDF:</label>
<input type="text" id="pilates_cbdf">

<!-- ================= HIST√ìRIA CL√çNICA ================= -->

<h4>‚öïÔ∏è HIST√ìRIA CL√çNICA</h4>

<label>Queixa Principal:</label>
<textarea id="pilates_queixaPrincipal"></textarea>

<label>Hist√≥ria Patol√≥gica Pregressa (HPP):</label>
<textarea id="pilates_hpp"></textarea>

<label>Antecedentes Pessoais:</label>
<textarea id="pilates_antecedentesPessoais"></textarea>

<label>Antecedentes Familiares:</label>
<textarea id="pilates_antecedentesFamiliares"></textarea>

<label>Tratamentos Realizados:</label>
<textarea id="pilates_tratamentos"></textarea>

<label>H√°bitos de vida:</label>
<textarea id="pilates_habitos"></textarea>

<div class="campo">
<label>Realiza acompanhamento m√©dico/fisioterap√™utico?</label>
<div class="opcoes">
<label><input type="radio" name="pilates_acompanhamento" id="pilates_acompanhamentoSim"> Sim</label>
<label><input type="radio" name="pilates_acompanhamento" id="pilates_acompanhamentoNao"> N√£o</label>
</div>
<label>Qual especialidade?</label>
<input type="text" id="pilates_especialidade">
</div>

<!-- ================= APRESENTA√á√ÉO ================= -->

<h4>‚öïÔ∏è APRESENTA√á√ÉO DO PACIENTE</h4>

<div class="opcoes-grid">
<label><input type="checkbox" id="pilates_orientado"> Deambulando e orientado</label>
<label><input type="checkbox" id="pilates_apoio"> Deambulando com apoio</label>
<label><input type="checkbox" id="pilates_confuso"> Confuso</label>
<label><input type="checkbox" id="pilates_desorientado"> Desorientado</label>
</div>

<!-- ================= EXAMES / MEDICAMENTOS / CIRURGIA ================= -->

<div class="campo">
<label>Exames complementares?</label>
<div class="opcoes">
<label><input type="radio" name="pilates_exames" id="pilates_examesSim"> Sim</label>
<label><input type="radio" name="pilates_exames" id="pilates_examesNao"> N√£o</label>
</div>
</div>

<div class="campo">
<label>Usa medicamentos?</label>
<div class="opcoes">
<label><input type="radio" name="pilates_medicamentos" id="pilates_medicamentoSim"> Sim</label>
<label><input type="radio" name="pilates_medicamentos" id="pilates_medicamentoNao"> N√£o</label>
</div>
</div>

<div class="campo">
<label>Realizou cirurgia?</label>
<div class="opcoes">
<label><input type="radio" name="pilates_cirurgia" id="pilates_cirurgiaSim"> Sim</label>
<label><input type="radio" name="pilates_cirurgia" id="pilates_cirurgiaNao"> N√£o</label>
</div>
<label>Se sim, quais:</label>
<textarea id="pilates_cirurgias"></textarea>
</div>

<!-- ================= INSPE√á√ÉO ================= -->

<h4>‚öïÔ∏è INSPE√á√ÉO / PALPA√á√ÉO</h4>

<div class="opcoes-grid">
<label><input type="checkbox" id="pilates_normal"> Normal</label>
<label><input type="checkbox" id="pilates_edema"> Edema</label>
<label><input type="checkbox" id="pilates_cicatriz"> Cicatriza√ß√£o incompleta</label>
<label><input type="checkbox" id="pilates_eritema"> Eritemas</label>
<label><input type="checkbox" id="pilates_outros"> Outros</label>
</div>

<!-- ================= SEMIOLOGIA ================= -->

<h4>‚öïÔ∏è SEMIOLOGIA</h4>
<textarea id="pilates_semiologia"></textarea>

<h4>‚öïÔ∏è PRESS√ÉO ARTERIAL</h4>
<input type="text" id="pilates_pressao">

<!-- ================= AVALIA√á√ÉO F√çSICA ================= -->

<h4>üèÉ AVALIA√á√ÉO F√çSICA</h4>

<div class="grid-2">
<div>
<label>Peso:</label>
<input type="number" id="pilates_peso">
</div>
<div>
<label>Altura:</label>
<input type="number" id="pilates_altura">
</div>
</div><!-- ================= TESTES FISIOTERAP√äUTICOS ================= -->

<h4>üìå TESTES FISIOTERAP√äUTICOS</h4>

<strong>Y BALANCE TESTE (Equil√≠brio Funcional)</strong>
<div class="opcoes">
<label><input type="radio" name="pilates_ybalance" id="pilates_y_risco"> Assimetria - Sim com risco</label>
<label><input type="radio" name="pilates_ybalance" id="pilates_y_nao"> N√£o</label>
</div>

<strong>TESTE DE ROMBERG (Equil√≠brio Est√°tico)</strong>
<div class="opcoes">
<label><input type="radio" name="pilates_romberg" id="pilates_romberg_pos"> Positivo</label>
<label><input type="radio" name="pilates_romberg" id="pilates_romberg_neg"> Negativo</label>
</div>

<strong>TESTE DE APOIO UNIPODAL ‚Äì TAU</strong>
<div class="opcoes">
<label><input type="radio" name="pilates_tau" id="pilates_tau_menor"> Menor risco de queda</label>
<label><input type="radio" name="pilates_tau" id="pilates_tau_maior"> Maior risco de queda</label>
</div>

<strong>TESTE TUG</strong>
<div class="opcoes">
<label><input type="radio" name="pilates_tug" id="pilates_tug_normal"> Normal</label>
<label><input type="radio" name="pilates_tug" id="pilates_tug_baixo"> Baixo risco</label>
<label><input type="radio" name="pilates_tug" id="pilates_tug_medio"> M√©dio risco</label>
<label><input type="radio" name="pilates_tug" id="pilates_tug_alto"> Alto risco</label>
</div>

<strong>TESTE DE MARCHA EM TANDEM</strong>
<div class="opcoes">
<label><input type="radio" name="pilates_tandem" id="pilates_tandem_normal"> Normal</label>
<label><input type="radio" name="pilates_tandem_leve"> Leve comprometimento</label>
<label><input type="radio" name="pilates_tandem_moderado"> Moderado</label>
<label><input type="radio" name="pilates_tandem_grave"> Grave</label>
</div>

<strong>TESTE DE LASEGUE</strong>
<div class="opcoes">
<label><input type="radio" name="pilates_lasegue" id="pilates_lasegue_pos"> Positivo</label>
<label><input type="radio" name="pilates_lasegue" id="pilates_lasegue_neg"> Negativo</label>
</div>

<strong>TESTE DE LASEGUE INVERTIDO</strong>
<div class="opcoes">
<label><input type="radio" name="pilates_lasegue_inv" id="pilates_lasegue_inv_pos"> Positivo</label>
<label><input type="radio" name="pilates_lasegue_inv" id="pilates_lasegue_inv_neg"> Negativo</label>
</div>

<strong>TESTE DE SPURLING</strong>
<div class="opcoes">
<label><input type="radio" name="pilates_spurling" id="pilates_spurling_pos"> Positivo</label>
<label><input type="radio" name="pilates_spurling" id="pilates_spurling_neg"> Negativo</label>
</div>

<!-- ================= ESCALA DE FOR√áA MUSCULAR ================= -->

<h4>‚öïÔ∏è ESCALA DE FOR√áA MUSCULAR</h4>

<div class="opcoes-grid">
<label><input type="radio" name="pilates_forca" id="pilates_g0"> Grau 0</label>
<label><input type="radio" name="pilates_forca" id="pilates_g1"> Grau 1</label>
<label><input type="radio" name="pilates_forca" id="pilates_g2"> Grau 2</label>
<label><input type="radio" name="pilates_forca" id="pilates_g3"> Grau 3</label>
<label><input type="radio" name="pilates_forca" id="pilates_g4"> Grau 4</label>
<label><input type="radio" name="pilates_forca" id="pilates_g5"> Grau 5</label>
</div>

<!-- ================= DINAM√îMETRO ================= -->

<h4>Teste de For√ßa Muscular no Dinam√¥metro</h4>

<div class="grid-2">
<div>
<label>B√≠ceps:</label>
<input type="text" id="pilates_biceps">
</div>
<div>
<label>Abdutores de Ombro:</label>
<input type="text" id="pilates_abdutores">
</div>
<div>
<label>Flexores de Ombro:</label>
<input type="text" id="pilates_flexores_ombro">
</div>
<div>
<label>Extensores de Ombro:</label>
<input type="text" id="pilates_extensores_ombro">
</div>
<div>
<label>Rotadores Mediais:</label>
<input type="text" id="pilates_rot_mediais">
</div>
<div>
<label>Rotadores Laterais:</label>
<input type="text" id="pilates_rot_laterais">
</div>
</div>

<!-- ================= FOR√áA E RESIST√äNCIA ================= -->

<h4>For√ßa e Resist√™ncia Muscular (Repeti√ß√µes por minuto)</h4>

<label>Abdominal Supra:</label>
<input type="text" id="pilates_abdominal_supra">

<label>Abdominal Infra:</label>
<input type="text" id="pilates_abdominal_infra">

<label>Prancha Isom√©trica:</label>
<input type="text" id="pilates_prancha">

<!-- ================= EVA ================= -->

<h4>‚öïÔ∏è Avalia√ß√£o da Intensidade da Dor ‚Äì EVA</h4>

<div class="grid-2">
<div>
<label>EVA 1:</label>
<input type="text" id="pilates_eva1">
<label>Regi√£o:</label>
<input type="text" id="pilates_regiao1">
</div>

<div>
<label>EVA 2:</label>
<input type="text" id="pilates_eva2">
<label>Regi√£o:</label>
<input type="text" id="pilates_regiao2">
</div>
</div>

<label>EVA 3:</label>
<input type="text" id="pilates_eva3">
<label>Regi√£o:</label>
<input type="text" id="pilates_regiao3">

<!-- ================= PLANO TERAP√äUTICO ================= -->

<h4>üìå PLANO TERAP√äUTICO</h4>

<label>Objetivos do Tratamento:</label>
<textarea id="pilates_objetivos"></textarea>

<label>Recursos Terap√™uticos:</label>
<textarea id="pilates_recursos"></textarea>

<label>Plano do Tratamento:</label>
<textarea id="pilates_planoTratamento"></textarea>

<!-- ================= EVOLU√á√ÉO ================= -->

<h4>üóìÔ∏è EVOLU√á√ÉO DOS ATENDIMENTOS</h4>

<label>Data:</label>
<input type="date" id="pilates_dataEvolucao">

<label>Procedimentos:</label>
<textarea id="pilates_procedimentos"></textarea>

<label>Intercorr√™ncia:</label>
<textarea id="pilates_intercorrencia"></textarea>

<label>Evolu√ß√£o do Estado de Sa√∫de:</label>
<textarea id="pilates_evolucaoEstado"></textarea>

<label>Profissional / Registro Conselho:</label>
<input type="text" id="pilates_profissional">

<!-- TELA RECOVERY -->
<div id="telaRecovery" class="hidden">
<div class="card">
<button onclick="voltar()">‚¨Ö Voltar</button>
<h3>Avalia√ß√£o Recovery</h3>

<input type="text" id="recovery_tipo" placeholder="Tipo de Recovery">
<textarea id="recovery_obs" placeholder="Observa√ß√µes"></textarea>

<button onclick="salvarRecovery()">Salvar</button>
</div>
</div>

<!-- TELA P√âLVICA -->
<div id="telaPelvica" class="hidden">
<div class="card">
<button onclick="voltar()">‚¨Ö Voltar</button>
<h3>Avalia√ß√£o P√©lvica</h3>

<textarea id="pelvica_queixa" placeholder="Queixa P√©lvica"></textarea>
<textarea id="pelvica_hist" placeholder="Hist√≥rico"></textarea>

<button onclick="salvarPelvica()">Salvar</button>
</div>
</div>

<!-- TELA DETALHE -->
<div id="telaDetalhe" class="hidden">
<div class="card">
<button onclick="voltar()">‚¨Ö Voltar</button>
<h3 id="tituloDetalhe"></h3>
<div id="dadosAvaliacao"></div>

<div id="evolucoes"></div>

<h4>Nova Evolu√ß√£o</h4>
<textarea id="textoEvolucao"></textarea>
<button onclick="salvarEvolucao()">Salvar Evolu√ß√£o</button>
</div>
</div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, push, set, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAFNuEzaEvvpBKBGNG7NUf3zt74Q3r1fdo",
  authDomain: "sistemaavaliacoes-26513.firebaseapp.com",
  databaseURL: "https://sistemaavaliacoes-26513-default-rtdb.firebaseio.com",
  projectId: "sistemaavaliacoes-26513",
  storageBucket: "sistemaavaliacoes-26513.firebasestorage.app",
  messagingSenderId: "451297691104",
  appId: "1:451297691104:web:1f886ad169a54c4f8fd785"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

let tempNome, tempTipo, tempData;
let avaliacaoAtualId = null;

/* ABRIR TELA POR TIPO */
window.abrirTelaPorTipo = function(){

tempNome = nome.value;
tempTipo = tipo.value;
tempData = data.value;

if(!tempNome || !tempTipo || !tempData){
alert("Preencha todos os campos.");
return;
}

telaInicial.classList.add("hidden");

document.getElementById("tela"+tempTipo.replace("√ß","c").replace("√©","e")).classList.remove("hidden");
};

/* SALVAMENTOS */
function salvarBase(dadosExtras){

const novaRef = push(ref(db,"avaliacoes"));

set(novaRef,{
nome: tempNome,
tipo: tempTipo,
data: tempData,
...dadosExtras,
criadoEm:new Date().toLocaleString()
});

alert("Avalia√ß√£o salva!");
voltar();
}

window.salvarFisioterapia = function(){

salvarBase({

sessao: fisio_sessao.checked,
pacote: fisio_pacote.checked,
qtdSessoes: fisio_qtdSessoes.value,
pix: fisio_pix.checked,
parcelado: fisio_parcelado.checked,
parcelas: fisio_parcelas.value,
parceria: fisio_parceria.value,

nomeCompleto: fisio_nomeCompleto.value,
dataNascimento: fisio_dataNascimento.value,
cpf: fisio_cpf.value,
masculino: fisio_masculino.checked,
feminino: fisio_feminino.checked,
responsavel: fisio_responsavel.value,
parentesco: fisio_parentesco.value,
cpfResponsavel: fisio_cpfResponsavel.value,
profissao: fisio_profissao.value,
endereco: fisio_endereco.value,
telefone: fisio_telefone.value,
email: fisio_email.value,
dataAvaliacao: fisio_dataAvaliacao.value,
diagnosticoClinico: fisio_diagClinico.value,
diagnosticoFisio: fisio_diagFisio.value,
cbdf: fisio_cbdf.value,

queixaPrincipal: fisio_queixaPrincipal.value,
hpp: fisio_hpp.value,
antecedentesPessoais: fisio_antecedentesPessoais.value,
antecedentesFamiliares: fisio_antecedentesFamiliares.value,
tratamentos: fisio_tratamentos.value,
habitos: fisio_habitos.value,
acompanhamentoSim: fisio_acompanhamentoSim.checked,
acompanhamentoNao: fisio_acompanhamentoNao.checked,
especialidade: fisio_especialidade.value,

orientado: fisio_orientado.checked,
apoio: fisio_apoio.checked,
confuso: fisio_confuso.checked,
desorientado: fisio_desorientado.checked,

examesSim: fisio_examesSim.checked,
examesNao: fisio_examesNao.checked,
examesQuais: fisio_examesQuais.value,

medicamentoSim: fisio_medicamentoSim.checked,
medicamentoNao: fisio_medicamentoNao.checked,
medicamentosQuais: fisio_medicamentosQuais.value,

cirurgiaSim: fisio_cirurgiaSim.checked,
cirurgiaNao: fisio_cirurgiaNao.checked,
cirurgias: fisio_cirurgias.value,
normal: fisio_normal.checked,
edema: fisio_edema.checked,
cicatriz: fisio_cicatriz.checked,
eritema: fisio_eritema.checked,
outros: fisio_outros.checked,

peso: fisio_peso.value,
altura: fisio_altura.value,

yRisco: fisio_y_risco.checked,
yNao: fisio_y_nao.checked,
rombergPos: fisio_romberg_pos.checked,
rombergNeg: fisio_romberg_neg.checked,
tugNormal: fisio_tug_normal.checked,
tugBaixo: fisio_tug_baixo.checked,
tugMedio: fisio_tug_medio.checked,
tugAlto: fisio_tug_alto.checked,
laseguePos: fisio_lasegue_pos.checked,
lasegueNeg: fisio_lasegue_neg.checked,

g0: fisio_g0.checked,
g1: fisio_g1.checked,
g2: fisio_g2.checked,
g3: fisio_g3.checked,
g4: fisio_g4.checked,
g5: fisio_g5.checked,

objetivos: fisio_objetivos.value,
recursos: fisio_recursos.value,
planoTratamento: fisio_planoTratamento.value,
profissional: fisio_profissional.value

});
};

window.salvarPilates = function(){
salvarBase({
objetivo:pilates_objetivo.value,
restricoes:pilates_restricoes.value
});
};

window.salvarRecovery = function(){
salvarBase({
tipoRecovery:recovery_tipo.value,
obs:recovery_obs.value
});
};

window.salvarPelvica = function(){
salvarBase({
queixa:pelvica_queixa.value,
historico:pelvica_hist.value
});
};

/* LISTA */
window.carregarAvaliacoes = function(){

const filtro = filtroTipo.value;

onValue(ref(db,"avaliacoes"),(snapshot)=>{

listaAvaliacoes.innerHTML="";

if(!snapshot.exists()){
listaAvaliacoes.innerHTML="Nenhuma avalia√ß√£o.";
return;
}

snapshot.forEach((child)=>{
const dados=child.val();
if(filtro && dados.tipo !== filtro) return;

const div=document.createElement("div");
div.className="lista-item";
div.innerHTML=`<strong>${dados.nome}</strong> - ${dados.tipo}`;
div.onclick=()=>abrirDetalhe(child.key,dados);
listaAvaliacoes.appendChild(div);
});
});
};

window.abrirDetalhe=function(id,dados){

avaliacaoAtualId=id;

telaInicial.classList.add("hidden");
telaDetalhe.classList.remove("hidden");

tituloDetalhe.innerText=`${dados.nome} - ${dados.tipo}`;

let html=`<p><strong>Data:</strong> ${dados.data}</p>`;

for (const key in dados){
if(!["nome","tipo","data","criadoEm"].includes(key)){
html+=`<p><strong>${key}:</strong> ${dados[key]}</p>`;
}
}

dadosAvaliacao.innerHTML=html;
carregarEvolucoes();
};

function carregarEvolucoes(){

evolucoes.innerHTML="<h4>Evolu√ß√µes</h4>";

onValue(ref(db,`avaliacoes/${avaliacaoAtualId}/evolucoes`),(snapshot)=>{
if(!snapshot.exists()){
evolucoes.innerHTML+="Nenhuma evolu√ß√£o.";
return;
}
snapshot.forEach((child)=>{
const evo=child.val();
evolucoes.innerHTML+=`
<p><strong>${evo.data}</strong><br>${evo.texto}<hr></p>`;
});
});
}

window.salvarEvolucao=function(){

if(!textoEvolucao.value) return;

const novaRef=push(ref(db,`avaliacoes/${avaliacaoAtualId}/evolucoes`));

set(novaRef,{
texto:textoEvolucao.value,
data:new Date().toLocaleDateString()
});

textoEvolucao.value="";
};

window.voltar=function(){

telaInicial.classList.remove("hidden");
telaFisioterapia.classList.add("hidden");
telaPilates.classList.add("hidden");
telaRecovery.classList.add("hidden");
telaPelvica.classList.add("hidden");
telaDetalhe.classList.add("hidden");
};

carregarAvaliacoes();

</script>
</body>
</html>









